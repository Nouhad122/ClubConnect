{% extends 'base.html' %}
{% block content%}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css'%}">
    <link rel="stylesheet" href="{% static 'css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/admin.css' %}">
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,500&display=swap" rel="stylesheet">
    <title>ClubConnect | Notifications | SKS Admin</title>
</head>
<body id="admin-notifications">
    <div class="blur" id="admin-notification-blur"></div>

    <form method="post" action="" class="admin-rejection-purpose">
        {% csrf_token %}
        <h3 class="mt-3">Please Enter Your Rejection Purpose</h3>
        <i onclick="hideRejectionPurpose()" class="fa-solid fa-xmark rejection-cancel"></i>
        <textarea  name="rejection_purpose" id="rej-perp" placeholder="enter your rejection purpose"></textarea>
        <br>
        <button class="submit-rej-btn" type="submit">Submit</button>
    </form>

    <div class="notif-header">
        <div class="filter-bg"></div>
        <h1>Notifications</h1>
    </div>

    <div class="all-features-container">
    <div class="notif-container">
      <form method="post" action="">
            {% csrf_token %}
        <div class="activities-notif-container">
            <h4>Event Activity Requests</h4>
            <div class="scroll-container">
            {% for act in activities %}
            <div class="activity-request" data-date="{{act.date}}" data-time = "{{act.time}}" data-category="{{act.categories}}"
             data-phone = "{{act.phonenumber}}" data-location="{{act.location}}" data-manager="{{act.clubmanager}}"
             data-vicemanager = "{{act.clubvicemanager}}"
             data-title = "{{act.eventtitle}}" data-image = "{{act.event_image.url}}"
             data-description = "{{act.description}}">

                <img src="{% static 'images/hiking-club.jpg' %}" alt="club logo">
                <div class="req-text"><strong class="club-name">{{act.clubname}}</strong> sent an event activity request <span class="view-interface-btn">view</span></div>
                <div class="decision-buttons">
                    {% if act.approved %}
                    <input class="accept-btn" type="checkbox" checked="
                    checked" value={{act.id}}
                    name="boxes">
                    {% else %}
                    <input class="accept-btn" type="checkbox" value={{act.id}}
                    name="boxes">
                    {% endif %}

                    
                        
                        <div class="form-group">
                            <label for="reason">Rejection Reason:</label>
                            <input type="text" class="form-control" name="reason" id="reason" placeholder="Enter rejection reason">
                        </div>
                        <button type="submit" class="btn btn-primary">Submit</button>
                   
                    

                </div>
            </div>
            {% endfor %}
        </div>
      </form>
      <button class="accept-btn" name="update_activities"  type="submit">Update approval</button>

        </div>
     <form method="post" action="">
          {% csrf_token %}
        <div class="posts-notif-container">
            <h4>Event Post Requests</h4>
            <div class="scroll-container">
                {% for post in posts %}
                <div class="post-request" data-title = "{{post.eventtitle}}"
                 data-image = "{{post.image.url}}"
                data-description = "{{post.postdescription}}">
                <img src="{% static 'images/hiking-club.jpg' %}" alt="club logo">
                <div class="req-text"><strong class="club-name">{{post.clubname}}</strong> sent an event post request <span class="view-interface-btn">view</span></div>
                <div class="decision-buttons">
                    {% if post.approved %}
                    <input class="accept-btn" type="checkbox" checked="
                    checked" value={{post.id}}
                    name="boxes">
                    {% else %}
                    <input class="accept-btn" type="checkbox" value={{post.id}}
                    name="boxes">
                    {% endif %}
                    <button class="accept-btn" type="button">Accept</button>
                    <button class="reject-btn" type="button">Reject</button>
                </div>
            </div>
            {% endfor %}
            
            </div> 
        </form>
        <button class="accept-btn" name="update_posts"  type="submit">Update approval</button>

        </div>
        <div class="edits-notif-container">
            <h4>Edit Event Requests</h4>
            <div class="scroll-container">
                <div class="edit-request" data-type = "activity" data-olddate="Sat, Apr 24" data-oldtime = '8:00 pm' data-oldcategory="Sport"
                data-oldphone = "+90 (534)442 1873" data-oldlocation="Block D, D-109" data-oldmanager="Nouhad El Hallab"
                data-oldvicemanager = 'Haneen' data-oldtitle = "Let's Hike Together" data-oldimage = "{% static 'images/hiking-event.jpg' %}"
                data-olddescription = "Embark on an unforgettable hiking journey to conquer the summit of BÃ¼yÃ¼k Camlica Hill.
                Experience breathtaking views, diverse wildlife, and camaraderie. Join us for adventure!
                 Explore the winding trails that lead you through lush greenery, with each step bringing you closer to the awe-inspiring peak.
                  As you ascend, be captivated by the symphony of nature, from the melodious songs of birds to the gentle rustle of leaves in the breeze.
                   Along the way, forge bonds with fellow adventurers, sharing in the exhilaration of the climb and the triumph of reaching the summit.
                    At the pinnacle, stand in awe as panoramic vistas stretch out before you, a tapestry of mountains, forests, and cityscapes that leave you breathless.
                     This journey is not just about conquering a hill; it's about immersing yourself in the beauty of the natural world and the thrill of exploration.
                      So lace up your boots, pack your essentials, and join us as we embark on this epic adventure together!"

                      data-editeddate="Sat, Apr 24" data-editedtime = '12:00 pm' data-editedcategory="Sport"
                data-editedphone = "+90 (534)442 1873" data-editedlocation="Block D, D-109" data-editedmanager="Nouhad El Hallab"
                data-editedvicemanager = 'Haneen' data-editedtitle = "Hiking Event" data-editedimage = "{% static 'images/run-for-fun-event.jpg' %}"
                data-editeddescription = "Embark on an unforgettable hiking journey to conquer the summit of BÃ¼yÃ¼k Camlica Hill.
                Experience breathtaking views, diverse wildlife, and camaraderie. Join us for adventure!
                 Explore the winding trails that lead you through lush greenery, with each step bringing you closer to the awe-inspiring peak.
                  As you ascend, be captivated by the symphony of nature, from the melodious songs of birds to the gentle rustle of leaves in the breeze.
                   Along the way, forge bonds with fellow adventurers, sharing in the exhilaration of the climb and the triumph of reaching the summit.
                    At the pinnacle, stand in awe as panoramic vistas stretch out before you, a tapestry of mountains, forests, and cityscapes that leave you breathless.
                     This journey is not just about conquering a hill; it's about immersing yourself in the beauty of the natural world and the thrill of exploration.
                      So lace up your boots, pack your essentials, and join us as we embark on this epic adventure together!">
                <img src="{% static 'images/hiking-club.jpg' %}" alt="club logo">
                <div class="req-text"><strong class="club-name">Hike Harmony</strong> sent an edit activity event request <span class="view-interface-btn">view</span></div>
                <div class="decision-buttons">
                    <button class="accept-btn" type="button">Accept</button>
                    <button class="reject-btn" type="button">Reject</button>
                </div>
            </div>

            <div class="edit-request" data-type="post" data-oldtitle = "From our Hiking Event"
            data-oldimage = "https://www.colorado.edu/program/data-science/sites/default/files/styles/large/public/slider/img_0146_0.jpg?itok=IVE2eqdQ"
           data-olddescription = "Memories made on the trail! ðŸŒ²ðŸ¥¾ Check out this snapshot of our students embracing nature's beauty during our recent hike.
            Adventure awaits! ðŸ“¸âœ¨ #Hiking #NatureLovers"

            data-editedtitle = "Hiking Event Was Great!"
            data-editedimage = "https://www.colorado.edu/program/data-science/sites/default/files/styles/large/public/slider/img_0146_0.jpg?itok=IVE2eqdQ"
           data-editeddescription = "Memories made on the trail! ðŸŒ²ðŸ¥¾ Check out this snapshot of our students embracing nature's beauty during our recent hike.
            Adventure awaits! ðŸ“¸âœ¨ #Hiking #NatureLovers">
                <img src="{% static 'images/hiking-club.jpg' %}" alt="club logo">
                <div class="req-text"><strong class="club-name">Hike Harmony</strong> sent an edit post event request <span class="view-interface-btn">view</span></div>
                <div class="decision-buttons">
                    <button class="accept-btn" type="button">Accept</button>
                    <button class="reject-btn" type="button">Reject</button>
                </div>
            </div>

            <div class="edit-request" data-type="post" data-oldtitle = "Join Us as Vice Manager of Pixel Pioneers!"
            data-oldimage = ""
           data-olddescription = "We need a passionate gaming enthusiast to join our team as Vice Manager of the Pixel Pioneers!
            Take part in organizing events and building a thriving gaming community on campus. Ready to level up? Apply now!"

            data-editedtitle = "Vice Manager Is Needed!"
            data-editedimage = ""
           data-editeddescription = "We need a vice manager to join our team in Pixel Pioneers, If you are passionate in gaming
           world, contact us via whatsapp: +90 534 441 2345">
                <img src="{% static 'images/gaming-club.jpg' %}" alt="club logo">
                <div class="req-text"><strong class="club-name">Pixel Pioneers</strong> sent an edit post event request <span class="view-interface-btn">view</span></div>
                <div class="decision-buttons">
                    <button class="accept-btn" type="button">Accept</button>
                    <button class="reject-btn" type="button">Reject</button>
                </div>
            </div>

            </div>
        </div>
    </div>
    
    <div class="event-interface-container" id="activity-interface-container">
        <!-- HERE THE ACTIVITY INTERFACE WILL BE DISPLAYED FROM JS  -->
    </div>

    <div class="event-interface-container" id="post-interface-container">
        <!-- HERE THE POST INTERFACE WILL BE DISPLAYED FROM JS  -->
    </div>

    <div class="event-interface-container" id="edited-event-interface-container">
        <!-- HERE THE Old and Edited Event INTERFACE WILL BE DISPLAYED FROM JS  -->
    </div>
    
</div>

    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/all.min.js' %}"></script>
    <script src="{% static 'js/navbar.js' %}"></script>
    <script>
let activityRequest = document.querySelectorAll('.activity-request');
let activityInterface = document.getElementById('activity-interface-container');
let postRequest = document.querySelectorAll('.post-request');
let editRequest = document.querySelectorAll('.edit-request');
let postInterface = document.getElementById('post-interface-container');
let editedEventInterface = document.getElementById('edited-event-interface-container');

function showRequestContent(request,interfaceContainer){
  for(let i = 0; i < request.length; i++){
    let eventViewBtn = request[i].querySelector('.view-interface-btn');
    let clubName = request[i].querySelector('.club-name');

    eventViewBtn.addEventListener('click', ()=>{
      interfaceContainer.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      window.scrollTo({
          top: 0,
          behavior: 'smooth'
      });
      let activityPreview =
      `
      <i onclick="closeEventInterface(activityInterface)" class="fa-solid fa-x"></i>
      <div class="activity-interface interface-box">
          <div class="image-wrapper">
                  <img class="activity-image" src="${request[i].dataset.image}" class="card-img-top event-img">
              </div>
              <div class="activity-infos">
              <div class="activity-title-desc">
              <h3 class="activity-title">${request[i].dataset.title}</h3>
              <p class="activity-desc">${request[i].dataset.description}</p>
             </div>
             <div class="activity-subheaders">
              <p><i class="fa-regular fa-calendar"></i> Date: ${request[i].dataset.date}</p>
              <p><i class="fa-regular fa-clock"></i> Time: ${request[i].dataset.time}</p>
              <p><i class="fa-solid fa-location-dot"></i> Location: ${request[i].dataset.location}</p>
              <p><i class="fa-solid fa-list"></i> Category: ${request[i].dataset.category}</p>
              <p><i class="fa-regular fa-user"></i> Manager: ${request[i].dataset.manager}</p>
              <p><i class="fa-regular fa-user"></i> Vice Manager: ${request[i].dataset.vicemanager}</p>
              <p><i class="fa-solid fa-cube"></i> Club Name: ${clubName.textContent}</p>
              <p><i class="fa-solid fa-phone"></i> Phone Number: ${request[i].dataset.phone}</p>
              
             </div>
              </div>
  </div>
      
      `;

      let postPreview = `
<i onclick="closeEventInterface(postInterface)" class="fa-solid fa-x"></i>
<div class="post-interface interface-box">
  ${request[i].dataset.image !== "" ? 
      `<div class="image-wrapper">
          <img class="post-image" src="${request[i].dataset.image}" class="card-img-top event-img">
      </div>` 
      : ""}
  <div class="post-infos">
      <div class="post-title-desc">
          <h3 class="post-title">${request[i].dataset.title}</h3>
          <p class="post-desc">${request[i].dataset.description}</p>
      </div>
      <div class="post-subheaders">
          <p><i class="fa-solid fa-cube"></i> Club Name: ${clubName.textContent}</p>
      </div>
  </div>
</div>`;

let editActivityPreview =
      `
      <i onclick="closeEventInterface(editedEventInterface)" class="fa-solid fa-x"></i>
      
      <div class= "old-edited-intefaces-container">
      <div class="edited-old-box">
          <div class="box-filter old-box-filter"></div>
          <div class="image-wrapper">
                  <img class="activity-image" src="${request[i].dataset.oldimage}" class="card-img-top event-img">
              </div>
              <div class="activity-infos">
              <div class="activity-title-desc">
              <h3 class="activity-title">${request[i].dataset.oldtitle}</h3>
              <p class="activity-desc">${request[i].dataset.olddescription}</p>
             </div>
             <div class="activity-subheaders">
              <p><i class="fa-regular fa-calendar"></i> Date: ${request[i].dataset.olddate}</p>
              <p><i class="fa-regular fa-clock"></i> Time: ${request[i].dataset.oldtime}</p>
              <p><i class="fa-solid fa-location-dot"></i> Location: ${request[i].dataset.oldlocation}</p>
              <p><i class="fa-solid fa-list"></i> Category: ${request[i].dataset.oldcategory}</p>
              <p><i class="fa-regular fa-user"></i> Manager: ${request[i].dataset.oldmanager}</p>
              <p><i class="fa-regular fa-user"></i> Vice Manager: ${request[i].dataset.oldvicemanager}</p>
              <p><i class="fa-solid fa-cube"></i> Club Name: ${clubName.textContent}</p>
              <p><i class="fa-solid fa-phone"></i> Phone Number: ${request[i].dataset.oldphone}</p>
              
             </div>
              </div>
  </div>

  <div class="edited-old-box">
      <div class="box-filter edited-box-filter"></div>
      <div class="image-wrapper">
              <img class="activity-image" src="${request[i].dataset.editedimage}" class="card-img-top event-img">
          </div>
          <div class="activity-infos">
          <div class="activity-title-desc">
          <h3 class="activity-title">${request[i].dataset.editedtitle}</h3>
          <p class="activity-desc">${request[i].dataset.editeddescription}</p>
         </div>
         <div class="activity-subheaders">
          <p><i class="fa-regular fa-calendar"></i> Date: ${request[i].dataset.editeddate}</p>
          <p><i class="fa-regular fa-clock"></i> Time: ${request[i].dataset.editedtime}</p>
          <p><i class="fa-solid fa-location-dot"></i> Location: ${request[i].dataset.editedlocation}</p>
          <p><i class="fa-solid fa-list"></i> Category: ${request[i].dataset.editedcategory}</p>
          <p><i class="fa-regular fa-user"></i> Manager: ${request[i].dataset.editedmanager}</p>
          <p><i class="fa-regular fa-user"></i> Vice Manager: ${request[i].dataset.editedvicemanager}</p>
          <p><i class="fa-solid fa-cube"></i> Club Name: ${clubName.textContent}</p>
          <p><i class="fa-solid fa-phone"></i> Phone Number: ${request[i].dataset.editedphone}</p>
          
         </div>
          </div>
</div>
</div>
      
  `;
let editPostPreview = `
      <i onclick="closeEventInterface(editedEventInterface)" class="fa-solid fa-x"></i>
      <div class= "old-edited-intefaces-container">
      <div class="edited-old-box post-edited-old-box">
      <div class="box-filter old-box-filter"></div>
          ${request[i].dataset.oldimage !== "" ? 
              `<div class="image-wrapper">
                  <img class="post-image" src="${request[i].dataset.oldimage}" class="card-img-top event-img">
              </div>` 
              : ""}
          <div class="post-infos">
              <div class="post-title-desc">
                  <h3 class="post-title">${request[i].dataset.oldtitle}</h3>
                  <p class="post-desc">${request[i].dataset.olddescription}</p>
              </div>
              <div class="post-subheaders">
                  <p><i class="fa-solid fa-cube"></i> Club Name: ${clubName.textContent}</p>
              </div>
          </div>
      </div>
      
      <div class="edited-old-box post-edited-old-box">
      <div class="box-filter edited-box-filter"></div>
          ${request[i].dataset.editedimage !== "" ? 
              `<div class="image-wrapper">
                  <img class="post-image" src="${request[i].dataset.editedimage}" class="card-img-top event-img">
              </div>` 
              : ""}
          <div class="post-infos">
              <div class="post-title-desc">
                  <h3 class="post-title">${request[i].dataset.editedtitle}</h3>
                  <p class="post-desc">${request[i].dataset.editeddescription}</p>
              </div>
              <div class="post-subheaders">
                  <p><i class="fa-solid fa-cube"></i> Club Name: ${clubName.textContent}</p>
              </div>
          </div>
      </div>
  </div>`;

      if(interfaceContainer.id === 'activity-interface-container'){
          interfaceContainer.innerHTML = activityPreview;
      }
      else if(interfaceContainer.id === 'post-interface-container'){
          interfaceContainer.innerHTML = postPreview;
      }
      else if(interfaceContainer.id === 'edited-event-interface-container' && request[i].dataset.type === 'activity'){
          interfaceContainer.innerHTML = editActivityPreview;
      }
      else if(interfaceContainer.id === 'edited-event-interface-container' && request[i].dataset.type === 'post'){
          interfaceContainer.innerHTML = editPostPreview;
      }
      
    });
}
}
showRequestContent(activityRequest,activityInterface);
showRequestContent(postRequest,postInterface);
showRequestContent(editRequest,editedEventInterface);

function closeEventInterface(interface){
  interface.style.display = 'none';
  document.body.style.overflow = 'auto';
}


let rejectionContainer = document.querySelector('.admin-rejection-purpose');
let rejectionBlur = document.getElementById('admin-notification-blur');
function showRejectionPurpose(){
  document.body.style.overflow = 'hidden';
  rejectionContainer.style.display = 'block';
  rejectionBlur.style.display = 'block';
}

function hideRejectionPurpose(){
    document.body.style.overflow = 'auto';
    rejectionContainer.style.display = 'none';
    rejectionBlur.style.display = 'none';
}
    </script>
    
</body>
</html>
{% endblock content %}